
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gromacs installation &#8212; SciComp9502B</title>
    
  <link rel="stylesheet" href="../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/pdf_print.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom_layouts.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/extra.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/save_state.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://mejk.github.io/CHEM3300G/class/week04/gromacs-installation.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />


<!-- Opengraph tags -->
<meta property="og:url"         content="https://mejk.github.io/CHEM3300G/class/week04/gromacs-installation.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Gromacs installation" />
<meta property="og:description" content="Gromacs installation  Preparations  Let’s check that we have the compilers and cmake. If not, install them  gcc --version   replace gcc by clang or icc if you u" />
<meta property="og:image"       content="https://mejk.github.io/CHEM3300G/_static/logo-scicomp.svg" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/logo-scicomp.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">SciComp9502B</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../about/syllabus.html">
   Scientific Computing - SciComp9505B
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../week02/Linux-basics.html">
   1. Linux - the basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../week02/linux-basic-commands-2.html">
   2. Linux: Some basic &amp; useful commands
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../week02/python-intro.html">
   3. Brief introduction to Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../week01/hpc-intro.html">
   4. Background on computers, computing and High Performance Computing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../week03/random_numbers.html">
   5. Random numbers
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  More material
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../extras/coding-notes-general.html">
   1. On computation and codes
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Installation instructions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../extras/install-wsl.html">
   1. Installation of tools: WSL2/Linux etc.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../week02/python-installation.html">
   2. Installation of Python and Jupyter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../extras/python-virtual-environment.html">
   3. Python virtual environments
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  How-tos
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../week02/jupyter-intro.html">
   1. Jupyter Notebook / Jupyter Lab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../extras/vi-editor.html">
   2. The
   <code class="docutils literal notranslate">
    <span class="pre">
     vi
    </span>
   </code>
   editor
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../extras/editing-ascii.html">
   3. Editing ASCII files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../extras/helpful-software.html">
   4. Helpful software
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  More on computers / help
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/mejk/computer-stuff/blob/master/ssh-keys.md">
   ssh keys, aliases and connecting using ssh keys
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/mejk/computer-stuff">
   Random notes on computers, installation, dual boot, vnc, etc.
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/class/week04/gromacs-installation.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preparations">
   Preparations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1-create-the-necessary-directories">
     Step 1: Create the necessary directories
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2-download-the-gromacs-source-file">
     Step 2: Download the Gromacs source file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3-check-the-authenticity-digital-fingerprint-of-the-gromacs-source-file">
     Step 3. Check the authenticity (digital fingerprint) of the Gromacs source file:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-4-unpack-uncompress-and-create-a-build-directory">
     Step 4. Unpack, uncompress and create a build directory.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-5-building-gromacs">
     Step 5: Building gromacs.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-6-making-gromacs">
     Step 6: “Making” gromacs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-7-running-regressions-tests-checking-that-everything-works">
     Step 7: Running regressions tests (=checking that everything works)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-8-finally-installation">
     Step 8: Finally: installation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-afficionados">
     For afficionados:
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="gromacs-installation">
<h1>Gromacs installation<a class="headerlink" href="#gromacs-installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="preparations">
<h2>Preparations<a class="headerlink" href="#preparations" title="Permalink to this headline">¶</a></h2>
<p>Let’s check that we have the compilers and cmake. If not, install them</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>replace <code class="docutils literal notranslate"><span class="pre">gcc</span></code> by <code class="docutils literal notranslate"><span class="pre">clang</span></code> or <code class="docutils literal notranslate"><span class="pre">icc</span></code> if you use clan or intel compiler instead</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">--</span><span class="n">version</span>
<span class="n">g</span><span class="o">++</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>this checks if c++ compiler was also installed. It should have been but it appears in some Windows 10 systems that was not the case but <code class="docutils literal notranslate"><span class="pre">g++</span></code> (the c++ compiler) had to be installed separately. If not found, execute <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">g++</span></code></p>
<p>Everything found? Then let’t move on.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-1-create-the-necessary-directories">
<h3>Step 1: Create the necessary directories<a class="headerlink" href="#step-1-create-the-necessary-directories" title="Permalink to this headline">¶</a></h3>
<p>Open a terminal window (Linux, OSX or Ubuntu shell in Windows 10). We will take the following approach: we will create separate locations for downloading the source file and for the fina installation. While this is not really necessary, it is helpful since if we have to reinstall it for any reason, it will then be very easy use the downloaded source file(s) again. The actual installation will be done in a local directory and we will create a separate directory for that. That directory is where the exectuables and other files of the software will be put.</p>
<p>Let’s ensure that we are in the home directory. We then create the main directory for the course called <code class="docutils literal notranslate"><span class="pre">MDCOURSE</span></code> and under that directories gromacs where we will download the files and a second directory called <code class="docutils literal notranslate"><span class="pre">gmx</span></code> where will install the software. Execute the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span>
<span class="n">mkdir</span> <span class="n">MDCOURSE</span>
<span class="n">cd</span> <span class="n">MDCOURSE</span>
<span class="n">mkdir</span> <span class="n">gromacs</span>
<span class="n">mkdir</span> <span class="n">gmx</span>
</pre></div>
</div>
</div>
<div class="section" id="step-2-download-the-gromacs-source-file">
<h3>Step 2: Download the Gromacs source file<a class="headerlink" href="#step-2-download-the-gromacs-source-file" title="Permalink to this headline">¶</a></h3>
<p>If you followed Step 1, you should now be in the <code class="docutils literal notranslate"><span class="pre">MDCOURSE</span></code> directory. Move to the
download directory (the directory called gromacs we created) and download gromacs
using the command line as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">gromacs</span>
<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">gromacs</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">pub</span><span class="o">/</span><span class="n">gromacs</span><span class="o">/</span><span class="n">gromacs</span><span class="o">-</span><span class="mf">2019.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">ls</span> <span class="o">-</span><span class="n">lt</span>

</pre></div>
</div>
</div>
<div class="section" id="step-3-check-the-authenticity-digital-fingerprint-of-the-gromacs-source-file">
<h3>Step 3. Check the authenticity (digital fingerprint) of the Gromacs source file:<a class="headerlink" href="#step-3-check-the-authenticity-digital-fingerprint-of-the-gromacs-source-file" title="Permalink to this headline">¶</a></h3>
<p>Now that we have source file downloaded, we should check that the digital fingerprint (<code class="docutils literal notranslate"><span class="pre">md5sum</span></code>) matches the one given on the download page (fcd283dd0fe5ceb54dd9d735d75cbc65; check this at http://manual.gromacs.org/documentation/2019/download.html ). The numbers should be exactly the same. Run the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">md5sum</span> <span class="n">gromacs</span><span class="o">-</span><span class="mf">2019.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p><strong>Note for Mac users:</strong> The command <code class="docutils literal notranslate"><span class="pre">md5sum</span></code> is not present on a mac. Try <code class="docutils literal notranslate"><span class="pre">md5</span></code> instead.If it doesn’t work, install it with Brew:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">md5sha1sum</span>
<span class="n">md5</span> <span class="n">gromacs</span><span class="o">-</span><span class="mf">2019.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-unpack-uncompress-and-create-a-build-directory">
<h3>Step 4. Unpack, uncompress and create a build directory.<a class="headerlink" href="#step-4-unpack-uncompress-and-create-a-build-directory" title="Permalink to this headline">¶</a></h3>
<p>The next step is to uncompress and unpack the file and to create a build directory. The latter is where the software is built (=a temporary directory for setting up various things for the actual installation). Note, you can omit the letter <code class="docutils literal notranslate"><span class="pre">v</span></code> in the <code class="docutils literal notranslate"><span class="pre">tar</span></code> command below: The option <code class="docutils literal notranslate"><span class="pre">v</span></code> produces verbose output and shows what is being produced (so use it if you want to see what is going on). Without it, no messages will be printed on screen. After unpacking, check that a new directory called <code class="docutils literal notranslate"><span class="pre">gromacs-2019</span></code> has been created. Below, we also list the contents but you can skip that, of course. We then move in there, create a build directory and move in there:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="n">xzfv</span> <span class="n">gromacs</span><span class="o">-</span><span class="mf">2019.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">ls</span> <span class="o">-</span><span class="n">lt</span>
<span class="n">cd</span> <span class="n">gromacs</span><span class="o">-</span><span class="mi">2019</span>
<span class="n">mkdir</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
</pre></div>
</div>
</div>
<div class="section" id="step-5-building-gromacs">
<h3>Step 5: Building gromacs.<a class="headerlink" href="#step-5-building-gromacs" title="Permalink to this headline">¶</a></h3>
<p>Using Ubuntu Shell on Windows 10 on my small 1.3 GHz (i7) laptop, this step took 3 minutes.</p>
<p>In this is very important to you are located inside the build directory where we just moved. This is also emphasized below. The steps have two parts: building the software with cmake and then compilation with make. Cmake is a general the tool for building software. When software is built, the process
checks, among other things, that all the dependencies (=software, libraries etc that the new software be installed depends on) are present and sets the paths (=directories) for the actual installation. We can
pass arguments such as the installation directory to cmake and that is what we will do; the default installation directory define in the software source files is in the system. We want to have a local installation instead. We can define that in when we run cmake.
The command looks like this but don’t execute it run it yet, we will first walk through the different parts of the command and then execute it</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">..</span> <span class="o">-</span><span class="n">DGMX_BUILD_OWN_FFTW</span><span class="o">=</span><span class="n">ON</span> \
<span class="o">-</span><span class="n">DREGRESSIONTEST_DOWNLOAD</span><span class="o">=</span><span class="n">ON</span> \
<span class="o">-</span><span class="n">DCMAKE_INSTALL_PREFIX</span><span class="o">=/</span><span class="n">pathtohome</span><span class="o">/</span><span class="n">username</span><span class="o">/</span><span class="n">MDCOURSE</span><span class="o">/</span><span class="n">gmx</span>
</pre></div>
</div>
<p>The two dots tell cmake to get the source files from a directory above the current one. Then, the part</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DGMX_BUILD_OWN_FFTW</span><span class="o">=</span><span class="n">ON</span>
</pre></div>
</div>
<p>says that the we build our own fftw. In other words, during the process the lastest source files for fftw are fetched and built. If you change it to OFF, then the process uses the one from your system (if it doesn’t exist an error will be produced). The second one,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DREGRESSIONTEST_DOWNLOAD</span><span class="o">=</span><span class="n">ON</span>
</pre></div>
</div>
<p>downloads the regression tests. The are needed to check that everything is ok. The third part</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DCMAKE_INSTALL_PREFIX</span><span class="o">=/</span><span class="n">pathtohome</span><span class="o">/</span><span class="n">username</span><span class="o">/</span><span class="n">MDCOURSE</span><span class="o">/</span><span class="n">gmx</span>
</pre></div>
</div>
<p>defines the location for the installation. This is very important. Remember, we created directory gmx under <code class="docutils literal notranslate"><span class="pre">MDCOURSE</span></code> (<code class="docutils literal notranslate"><span class="pre">MDCOURSE/gmx</span></code>) as the installation location. You have to change the first part after the equal sign as follows (we will do this below when execute the command): 1) we check where your home is to replace the part /pathtohome/username . This can vary depending on if you are on Mac, Linux or Ubuntu bash shell in Windows. There are several ways of doing that, but let’s use the command echo and check the system variable for home (<code class="docutils literal notranslate"><span class="pre">$HOME</span></code>). The neat part is that this work on all
operating systems. You can see that yourself, just execute</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>echo $HOME
</pre></div>
</div>
<p>and that tells where your home directory is.</p>
<p>We are now ready to execute the cmake command but let’s play it very safe (this makes it also quicker to check that everything is ok) to see that building will work. By this, I mean that we make a test build without downloading the regression tests as downloading them takes a extra time (can take 5-10 minutes). If the test build works, we then clean the directory using the command <code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-r</span> <span class="pre">*</span></code>. WARNING: this is a very powerful and potentially dangerous command. It does the following: <code class="docutils literal notranslate"><span class="pre">rm</span></code>
removes. The option <code class="docutils literal notranslate"><span class="pre">-r</span></code> instructs it to remove everything recursively under the current directory. The argument star is a so-called wildcard character and means ‘all files’. So the command removes all files and directories under the current directory. We could remove them one-by-one, of course, but that would be very time consuming. Here we must use rm since for the build to be successful, it has to be done in an empty directory. Since we will first do a test build, we must clean the directory to do the actual build. But you have been warned about the dangers of the rm command.</p>
<p>The commands below do the following: 1) double-check that you are in the build directory (if not move there but you should be there unless you didn’t follow the above), 2) perform the test build, 3a) if there were no errors listed at the end of the build, then clean dirctory or 3b) if there were errors, check the error messages and try to fix the errors and clean the directory</p>
<div class="highlight-pwd notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>let’s double-check that we are in the build directory. If not, move there.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cmake .. -DGMX_BUILD_OWN_FFTW=ON \
-DREGRESSIONTEST_DOWNLOAD=OFF \
-DCMAKE_INSTALL_PREFIX=${HOME}/MDCOURSE/gmx
</pre></div>
</div>
<p>perform a test build. Note the backslash allows dividing the command over separate lines. You can copy-paste that on your terminal. If there were no errors, then we clean the directory with the next command
and do the actual build and retrieve the regressionstests that we need.
<code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-r</span> <span class="pre">*</span></code>
We must clean the directory after the test build. The actual build must be done in an empty directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cmake .. -DGMX_BUILD_OWN_FFTW=ON \
-DREGRESSIONTEST_DOWNLOAD=ON \
-DCMAKE_INSTALL_PREFIX=${HOME}/MDCOURSE/gmx
</pre></div>
</div>
<p>No errors? Then move on the next step.</p>
</div>
<div class="section" id="step-6-making-gromacs">
<h3>Step 6: “Making” gromacs<a class="headerlink" href="#step-6-making-gromacs" title="Permalink to this headline">¶</a></h3>
<p>Using Ubuntu Shell on Windows 10 on my small 1.3 GHz (i7) laptop, this step took 25 minutes.</p>
<p>Using Linux on 3.9 GHz (i7) laptop, this step took 4 minutes.</p>
<p>Now that we have a build, we finally compile the software. That is done using make. Since this process takes computing resources, make sure you have not blocked the ventilation. Your computer/laptop is most likely a multicore computer. Let’s check that too using the command <code class="docutils literal notranslate"><span class="pre">nproc</span></code>. For example, for a dual core system it gives 4 (2 CPUs and 2 virtual computing cores). I doesn’t matter if you don’t have that command. Execute</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nproc</span>
</pre></div>
</div>
<p>gives the number of available computing cores. If you don’t have the command use plain
make instead of <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-j</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="o">-</span><span class="n">j4</span>
</pre></div>
</div>
<p>replace 4 by the number that nproc have or use plain make instead. This can take quite some time depending on your system (anything from minutes to an hour or so). Important: if you have to stop the process for some reason (for example if you need the computer and simpy cannot wait for this process to finish): first make sure yo come back to the build directory and then you must execute make clean and after that the above make command.</p>
<p>Assuming everything went fine without errors, we will run the checks in the next step.</p>
</div>
<div class="section" id="step-7-running-regressions-tests-checking-that-everything-works">
<h3>Step 7: Running regressions tests (=checking that everything works)<a class="headerlink" href="#step-7-running-regressions-tests-checking-that-everything-works" title="Permalink to this headline">¶</a></h3>
<p>Using Ubuntu Shell on Windows 10 on my small 1.3 GHz (i7) laptop, this step took 18 minutes.
Using Linux on 3.9 GHz (i7) laptop, this step took 4 minutes.</p>
<p>This process is also instensive and computing resources. It is very important to ensure that you have not blocked the ventilation. Compile and run the tests. This make take time anything from a few minutes to an hour depending on your computer. All tests should be passed (=no error message at the end).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">check</span>
</pre></div>
</div>
<p>this performs all the checks. This can take some time. Note: you can also use the <code class="docutils literal notranslate"><span class="pre">-j</span></code> option here. All tests should be passed (=no error message at the end). When the process ends, there is a listing of how many tests were passed or failed. The number of failures should be zero. If that is the case, we can finally install.</p>
</div>
<div class="section" id="step-8-finally-installation">
<h3>Step 8: Finally: installation<a class="headerlink" href="#step-8-finally-installation" title="Permalink to this headline">¶</a></h3>
<p>It is time to install. This puts the files in the installation directory we defined above. Execute</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>This is very quick.</p>
<p>Finally, to be able to use the software, we have to make sure that the system knows about it. For that we
have to ‘source’ it by running</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>source ${HOME}/MDCOURSE/gmx/bin/GMXRC
</pre></div>
</div>
<p>Now you’re ready to go. Just to 100% sure, let’s check that your installation is seen by the system by running the commands below. The first one shows where the Gromacs executable (<code class="docutils literal notranslate"><span class="pre">gmx</span></code>) it is located and the second one shows you the Gromacs version and some technical details,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">which</span> <span class="n">gmx</span>
<span class="n">gmx</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
</div>
<div class="section" id="for-afficionados">
<h3>For afficionados:<a class="headerlink" href="#for-afficionados" title="Permalink to this headline">¶</a></h3>
<p>If you want to install another version of gromacs</p>
<p>There are also many other arguments that can be used. In addition, the process also checks if you have a GPU present in your system and if it can be used to speed up computations (NVIDIA only) but let’s not worry about that at this time. You can see some of additional options for <code class="docutils literal notranslate"><span class="pre">cmake</span></code> at
http://manual.gromacs.org/documentation/2019/install-guide/index.html</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "firasm/jupyterbook_course_template",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./class/week04"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Mikko Karttunen<br/>
        
          <div class="extra_footer">
            <div>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://licensebuttons.net/l/by-nc-sa/3.0/88x31.png"></a>
    All content on this site (unless otherwise specified) is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0 license</a>
</div>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>